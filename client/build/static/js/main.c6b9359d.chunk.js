(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(32),c=n.n(a),r=(n(118),n(0)),i=n.n(r),s=n(30),o=n(14),l=n(11),u=n(3),j=n(4),d=n(174),b=n(191),h=n(194),p=n(192),O=n(190),x=n(193),f=n(22),m=n(185),g=n(100),v=n(95),y=n.n(v),w=n(96),C=n.n(w),E=n(85),N=n.n(E),S=n(97),k=n.n(S),L=n(27),T=n.n(L),I=n(44),_=n(48),R=n.n(_),A="LOGOUT_REQUEST",D="LOGOUT_SUCCESS",U="LOAD_USER_REQUEST",P="LOAD_USER_SUCCESS",F="LOAD_USER_FAIL",z="CLIENT_LOGIN_REQUEST",B="CLIENT_LOGIN_SUCCESS",G="CLIENT_LOGIN_FAIL",H="CLIENT_REGISTER_REQUEST",M="CLIENT_REGISTER_SUCCESS",J="CLIENT_REGISTER_FAIL",Q="CLIENT_DETAILS",W="NO_CLIENT",Y="CLEAR_ERRORS",q="CLEAR_MESSAGES",K=R.a.load("token"),V=n(21),X=n(189),Z="SHOW_NOTIF",$="HIDE_NOTIF",ee=function(e,t){return{type:Z,payload:{bg:e,msg:t}}},te=n(1),ne=Object(j.a)("div")((function(e){var t=e.theme;return Object(u.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(d.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(d.a)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(3),width:"auto"})})),ae=Object(j.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ce=Object(j.a)(f.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(u.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("md"),{width:"20ch"})}}));function re(){var e=Object(V.b)(),t=Object(V.c)((function(e){return e.auth})).isAuthenticated,n=Object(r.useState)(null),a=Object(l.a)(n,2),c=a[0],i=a[1],o=Object(r.useState)(null),u=Object(l.a)(o,2),j=u[0],d=u[1],f=Boolean(c),v=Boolean(j),w=function(e){i(e.currentTarget)},E=function(){d(null)},S=function(){i(null),E()},L="primary-search-account-menu",_=Object(te.jsxs)(g.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:L,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:S,children:[Object(te.jsx)(m.a,{children:"Profile"}),Object(te.jsx)(m.a,{onClick:function(){e(function(){var e=Object(I.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:A}),n={method:"GET",headers:{Authorization:K}},e.next=4,fetch("/api/v1/user/logout",n).then((function(e){return e.json()})).then((function(e){R.a.remove("token",{path:"/"}),t({type:D}),"user"===e.role&&t({type:W})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S(),e(ee("info","Logged Out."))},children:"Log Out"})]}),U="primary-search-account-menu-mobile",P={backgroundColor:"rgb(247,7,147)","&:hover":{backgroundColor:"rgb(247,7,147)"}},F=Object(te.jsx)(g.a,{anchorEl:j,anchorOrigin:{vertical:"top",horizontal:"right"},id:U,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:v,onClose:E,children:t?Object(te.jsxs)(m.a,{onClick:w,children:[Object(te.jsx)(O.a,{color:"inherit",children:Object(te.jsx)(N.a,{})}),Object(te.jsx)("p",{children:"Account"})]}):Object(te.jsx)(m.a,{children:Object(te.jsx)(s.b,{to:"/login",className:"Link",onClick:function(){return S()},children:Object(te.jsx)(X.a,{variant:"contained",sx:P,children:"Login"})})})});return Object(te.jsxs)(r.Fragment,{children:[Object(te.jsx)(b.a,{position:"fixed",sx:{color:"rgb(247,7,147)",backgroundColor:"#fff"},children:Object(te.jsxs)(p.a,{children:[Object(te.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{"@media screen and (min-device-width: 1200px) and (max-device-width: 1600px) and (-webkit-min-device-pixel-ratio: 1)":{mr:2}},children:Object(te.jsx)(y.a,{})}),Object(te.jsx)(x.a,{variant:"h6",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:Object(te.jsxs)(s.b,{to:"/",className:"Link",style:{color:"rgb(247,7,147)"},children:["2",Object(te.jsx)("sup",{children:"nd"}),"HandCar"]})}),Object(te.jsxs)(ne,{children:[Object(te.jsx)(ae,{children:Object(te.jsx)(C.a,{})}),Object(te.jsx)(ce,{placeholder:"Name of car or brand...",inputProps:{"aria-label":"search"}})]}),Object(te.jsx)(h.a,{sx:{flexGrow:1}}),Object(te.jsx)(h.a,{sx:{display:{xs:"none",md:"flex"}},children:t?Object(te.jsx)(O.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":L,"aria-haspopup":"true",onClick:w,color:"inherit",children:Object(te.jsx)(N.a,{})}):Object(te.jsx)(s.b,{to:"/login",className:"Link",children:Object(te.jsx)(X.a,{variant:"contained",sx:P,children:"Login"})})}),Object(te.jsx)(h.a,{sx:{display:{xs:"flex",md:"none"}},children:Object(te.jsx)(O.a,{size:"large","aria-label":"show more","aria-controls":U,"aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},color:"inherit",children:Object(te.jsx)(k.a,{})})})]})}),F,_]})}var ie=n(15),se=n(184),oe=n(186),le=function(){var e=Object(V.b)(),t=Object(V.c)((function(e){return e.design})),n=t.notif,a=t.notifbg,c=t.notifmsg,s=i.a.forwardRef((function(e,t){return Object(te.jsx)(se.a,Object(ie.a)({elevation:6,ref:t,variant:"filled"},e))})),o=function(){e({type:$})};return Object(te.jsx)(r.Fragment,{children:Object(te.jsx)(oe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:5e3,onClose:function(){return o()},children:Object(te.jsx)(s,{onClose:function(){return o()},severity:a,children:c})})})},ue=function(){return Object(te.jsx)("div",{children:"Home"})},je=(n(130),n(182)),de=n(76),be=n.n(de),he=n(187),pe=(n(131),function(e){var t=e.show;return Object(te.jsx)(he.a,{sx:{backgroundColor:"rgba(0 , 0, 0, 0.5)",zIndex:function(e){return e.zIndex.drawer+1}},open:!!t,children:Object(te.jsx)("div",{className:"spinner-8"})})}),Oe=function(){return function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Y});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},xe=function(){return function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:q});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},fe=function(){var e=Object(V.b)(),t=Object(o.f)(),n=Object(V.c)((function(e){return e.client})),a=n.loading,c=n.client,i=n.message,j=n.error;Object(r.useEffect)((function(){j&&(e(ee("error",j)),e(Oe())),c&&(i&&(e(ee("success",i)),e(xe())),t("/"))}),[e,j,i,c,t]);var d=Object(r.useState)({name:"",email:"",phone:"",password:""}),b=Object(l.a)(d,2),h=b[0],p=b[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),f=x[0],m=x[1],g=Object(r.useState)(""),v=Object(l.a)(g,2),y=v[0],w=v[1],C=Object(r.useState)(""),E=Object(l.a)(C,2),N=E[0],S=E[1],k=Object(r.useState)(""),L=Object(l.a)(k,2),_=L[0],A=L[1],D=h.name,U=h.email,F=h.phone,z=h.password,B=function(e){var t=e.target,n=t.name,a=t.value;p(Object(ie.a)(Object(ie.a)({},h),{},Object(u.a)({},n,a)))};return Object(te.jsxs)(r.Fragment,{children:[Object(te.jsx)(pe,{show:a}),Object(te.jsx)("h1",{className:"NewUser",children:"New User"}),Object(te.jsxs)("div",{className:"mainDivInput",children:[Object(te.jsxs)("div",{className:"divComb",children:[Object(te.jsx)("div",{className:"txtFieldDiv",children:Object(te.jsx)(je.a,{error:Boolean(f),helperText:f,type:"text",name:"name",value:D,onChange:B,label:"Your Name"})}),Object(te.jsx)("div",{className:"txtFieldDiv",children:Object(te.jsx)(je.a,{error:Boolean(y),helperText:y,type:"email",name:"email",value:U,onChange:B,label:"Your Email"})})]}),Object(te.jsxs)("div",{className:"divComb",children:[Object(te.jsx)("div",{className:"txtFieldDiv",children:Object(te.jsx)(je.a,{error:Boolean(N),helperText:N,type:"text",name:"phone",value:F,onChange:B,label:"Your Phone"})}),Object(te.jsx)("div",{className:"txtFieldDiv",children:Object(te.jsx)(je.a,{error:Boolean(_),helperText:_,type:"password",name:"password",value:z,onChange:B,label:"Password"})})]}),Object(te.jsx)("div",{className:"spaceAboveButton"}),Object(te.jsx)(X.a,{variant:"contained",color:"success",startIcon:Object(te.jsx)(be.a,{}),onClick:function(t){var n=0;!D||D.length>30?(++n,m("Empty name OR longer than 30.")):m(""),U&&U.includes("@")?w(""):(++n,w("Invalid Email.")),10!==F.length?(++n,S("Phone length is not 10.")):S(""),z.length<8?(++n,A("Password length is not 8 atleast.")):A(""),0===n&&e(function(e,t,n,a){return function(){var c=Object(I.a)(T.a.mark((function c(r){var i;return T.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:H}),i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,phone:n,password:a})},c.next=4,fetch("/api/v1/user/signup",i).then((function(e){return e.json()})).then((function(e){e.success?(r({type:P}),r({type:M,payload:{client:e.user,message:"Registered Successfully."}}),R.a.save("token",e.token,{path:"/"})):r({type:J,payload:e.message})})).catch((function(e){r({type:J,payload:"Please Try Again."})}));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(D,U,F,z))},children:"Signup"})]}),Object(te.jsx)("div",{className:"spaceAboveCancel"}),Object(te.jsx)("div",{className:"Cancel",children:Object(te.jsx)(s.b,{to:"/login",className:"Link",children:Object(te.jsx)("p",{children:"Have an account? Login"})})})]})},me=(n(132),function(){var e=Object(V.b)(),t=Object(o.f)(),n=Object(V.c)((function(e){return e.client})),a=n.loading,c=n.client,i=n.message,j=n.error;Object(r.useEffect)((function(){j&&(e(ee("error",j)),e(Oe())),c&&(i&&(e(ee("success",i)),e(xe())),t("/"))}),[e,j,i,c,t]);var d=Object(r.useState)({ID:"",password:""}),b=Object(l.a)(d,2),h=b[0],p=b[1],O=Object(r.useState)(""),x=Object(l.a)(O,2),f=x[0],m=x[1],g=Object(r.useState)(""),v=Object(l.a)(g,2),y=v[0],w=v[1],C=h.ID,E=h.password,N=function(e){var t=e.target,n=t.name,a=t.value;p(Object(ie.a)(Object(ie.a)({},h),{},Object(u.a)({},n,a)))};return Object(te.jsxs)(r.Fragment,{children:[Object(te.jsx)(pe,{show:a}),Object(te.jsx)("h1",{className:"NewUser",children:"Login"}),Object(te.jsxs)("div",{className:"mainDivInput",children:[Object(te.jsx)(je.a,{error:Boolean(f),helperText:f,type:"text",name:"ID",value:C,onChange:N,label:"Email or Phone"}),Object(te.jsx)("div",{className:"spanDiv"}),Object(te.jsx)(je.a,{error:Boolean(y),helperText:y,type:"password",name:"password",value:E,onChange:N,label:"Password"})]}),Object(te.jsx)("div",{className:"spaceAboveButton"}),Object(te.jsxs)("div",{className:"btnDiv",children:[Object(te.jsx)(X.a,{variant:"contained",color:"success",startIcon:Object(te.jsx)(be.a,{}),onClick:function(t){var n=0;C?m(""):(++n,m("Email or Phone is missing.")),E?w(""):(++n,w("Password is missing.")),0===n&&e(function(e,t){return function(){var n=Object(I.a)(T.a.mark((function n(a){var c;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:z}),c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ID:e,password:t})},n.next=4,fetch("/api/v1/user/login",c).then((function(e){return e.json()})).then((function(e){e.success?(a({type:P}),a({type:B,payload:{client:e.user,message:"Logged In."}}),R.a.save("token",e.token,{path:"/"})):a({type:G,payload:e.message})})).catch((function(e){a({type:G,payload:"Please Try Again."})}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(C,E))},children:"login"}),Object(te.jsx)("div",{className:"spaceAboveCancel"}),Object(te.jsx)("div",{className:"Cancel",children:Object(te.jsx)(s.b,{to:"/signup",className:"Link",children:Object(te.jsx)("p",{children:"New User? Signup"})})})]})]})}),ge=n(64),ve=n(99),ye=n(98),we=Object(ge.combineReducers)({client:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:case H:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!0});case B:case M:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,client:t.payload.client,message:t.payload.message});case G:case J:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,client:null,error:t.payload});case Q:return Object(ie.a)(Object(ie.a)({},e),{},{client:t.payload});case W:return Object(ie.a)(Object(ie.a)({},e),{},{client:null});case Y:return Object(ie.a)(Object(ie.a)({},e),{},{error:null});case q:return Object(ie.a)(Object(ie.a)({},e),{},{message:null});default:return e}},design:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{notifbg:"",notifmsg:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return{notif:!0,notifbg:t.payload.bg,notifmsg:t.payload.msg};case $:return{notif:!1};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:case A:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!0});case D:return{loading:!1,isAuthenticated:!1};case P:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,isAuthenticated:!0});case F:return Object(ie.a)(Object(ie.a)({},e),{},{loading:!1,isAuthenticated:!1});default:return e}}}),Ce=[ve.a],Ee=Object(ge.createStore)(we,{},Object(ye.composeWithDevTools)(ge.applyMiddleware.apply(void 0,Ce)));var Ne=function(){var e=Object(V.c)((function(e){return e.auth})).loading;return Object(r.useEffect)((function(){Ee.dispatch(function(){var e=Object(I.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:U}),n={method:"GET",headers:{Authorization:K}},e.next=4,fetch("/api/v1/user/me",n).then((function(e){return e.json()})).then((function(e){e.success?("user"===e.user.role&&t({type:Q,payload:e.user}),t({type:P})):(R.a.remove("token",{path:"/"}),t({type:F}))})).catch((function(e){t({type:F})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(te.jsxs)(s.a,{children:[Object(te.jsx)(re,{}),Object(te.jsx)(pe,{show:e}),Object(te.jsx)(le,{}),Object(te.jsxs)(o.c,{children:[Object(te.jsx)(o.a,{exact:!0,path:"/",element:Object(te.jsx)(ue,{})}),Object(te.jsx)(o.a,{exact:!0,path:"/signup",element:Object(te.jsx)(fe,{})}),Object(te.jsx)(o.a,{exact:!0,path:"/login",element:Object(te.jsx)(me,{})})]})]})};c.a.render(Object(te.jsx)(V.a,{store:Ee,children:Object(te.jsx)(Ne,{})}),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.c6b9359d.chunk.js.map